function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var t=e(require("tenacious-fetch")),o=e(require("lscache")),r=e(require("fast-safe-stringify")),n=e(require("fetch-response-enhancer")),i=e(require("nanomiddleware")),s=e(require("deep-assign"));var u={get:"GET",delete:"DELETE",head:"HEAD",options:"OPTIONS",post:"POST",put:"POST",patch:"PATCH"},c=function(e,o){if(void 0===o&&(o={}),!e||"string"!=typeof e)throw new Error("No base URL provided");this.baseURL=e.endsWith("/")?e.slice(0,e.length-1):e,this.fetch=o.fetch||t,this.middlware=new i,this.delayTime=o.delay||!1,this.cacheTime=o.cacheTime,delete o.fetch,this.config=o};c.prototype.delay=function(e){return void 0===e&&(e=1e3),new Promise(function(t){setTimeout(t,e)})},c.prototype.useMiddleware=function(e,t){void 0===t&&(t={}),this.middlware.use(e,t)},c.prototype.request=function(e,t){void 0===e&&(e="");try{var i=this;function u(){if(d.cache){var e=o.get(c);if(null!==e)return i.middlware.run(e)}return Promise.resolve(i.fetch(c,d)).then(function(e){return Promise.resolve(n(e,d)).then(function(e){return e.url=c,d.cache&&o.set(c,e,d.cacheTime||i.cacheTime||5),i.middlware.run(e)})})}var c=""+i.baseURL+e+(t.params?function(e){void 0===e&&(e={});var t=encodeURIComponent;return"?"+Object.keys(e).map(function(o){return t(o)+"="+t(e[o])}).join("&")}(t.params):""),d=s({headers:{Accept:"application/json","Content-Type":"application/json"}},i.config,t);"object"==typeof d.body&&"application/json"===d.headers["Content-Type"]&&(d.body=r(d.body||{}));var a=function(){if(i.delayTime)return Promise.resolve(i.delay(i.delayTime)).then(function(){})}();return a&&a.then?a.then(u):u()}catch(e){return Promise.reject(e)}},c.prototype.get=function(e,t){return void 0===t&&(t={}),this.request(e,s(t,{method:u.get}))},c.prototype.delete=function(e,t){return void 0===t&&(t={}),this.request(e,s(t,{method:u.delete}))},c.prototype.head=function(e,t){return void 0===t&&(t={}),this.request(e,s(t,{method:u.delete}))},c.prototype.options=function(e,t){return void 0===t&&(t={}),this.request(e,s(t,{method:u.options}))},c.prototype.post=function(e,t){return void 0===t&&(t={}),this.request(e,s(t,{method:u.post}))},c.prototype.put=function(e,t){return void 0===t&&(t={}),this.request(e,s(t,{method:u.put}))},c.prototype.patch=function(e,t){return void 0===t&&(t={}),this.request(e,s(t,{method:u.patch}))},exports.methods=u,exports.default=c;
//# sourceMappingURL=simple-fetch-client.js.map
