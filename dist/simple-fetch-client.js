function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var t=e(require("tenacious-fetch")),o=e(require("fast-safe-stringify")),r=e(require("fetch-response-enhancer")),n=e(require("nanomiddleware")),i=e(require("deep-assign")),s={get:"GET",delete:"DELETE",head:"HEAD",options:"OPTIONS",post:"POST",put:"PUT",patch:"PATCH"},u=function(e,o){if(void 0===o&&(o={}),!e||"string"!=typeof e)throw new Error("No base URL provided");this.baseURL=e.endsWith("/")?e.slice(0,e.length-1):e,this.fetch=o.fetch||t,this.middlware=new n,this.delayTime=o.delay||!1,delete o.fetch,this.config=o};u.prototype.delay=function(e){return void 0===e&&(e=1e3),new Promise(function(t){setTimeout(t,e)})},u.prototype.useMiddleware=function(e,t){void 0===t&&(t={}),this.middlware.use(e,t)},u.prototype.request=function(e,t){void 0===e&&(e="");try{var n=this;function s(){return Promise.resolve(n.fetch(u,d)).then(function(e){return Promise.resolve(r(e,d)).then(function(e){return e.url=u,n.middlware.run(e)})})}var u=""+n.baseURL+e+(t.params?function(e){void 0===e&&(e={});var t=encodeURIComponent;return"?"+Object.keys(e).map(function(o){return t(o)+"="+t(e[o])}).join("&")}(t.params):""),d=i({headers:{Accept:"application/json","Content-Type":"application/json"}},n.config,t);"object"==typeof d.body&&"application/json"===d.headers["Content-Type"]&&(d.body=o(d.body||{}));var p=function(){if(n.delayTime)return Promise.resolve(n.delay(n.delayTime)).then(function(){})}();return p&&p.then?p.then(s):s()}catch(e){return Promise.reject(e)}},u.prototype.get=function(e,t){return void 0===t&&(t={}),this.request(e,i(t,{method:s.get}))},u.prototype.delete=function(e,t){return void 0===t&&(t={}),this.request(e,i(t,{method:s.delete}))},u.prototype.head=function(e,t){return void 0===t&&(t={}),this.request(e,i(t,{method:s.delete}))},u.prototype.options=function(e,t){return void 0===t&&(t={}),this.request(e,i(t,{method:s.options}))},u.prototype.post=function(e,t){return void 0===t&&(t={}),this.request(e,i(t,{method:s.post}))},u.prototype.put=function(e,t){return void 0===t&&(t={}),this.request(e,i(t,{method:s.put}))},u.prototype.patch=function(e,t){return void 0===t&&(t={}),this.request(e,i(t,{method:s.patch}))},exports.methods=s,exports.default=u;
