!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("tenacious-fetch"),require("lscache"),require("fast-safe-stringify"),require("fetch-response-enhancer"),require("nanomiddleware"),require("deep-assign")):"function"==typeof define&&define.amd?define(["exports","tenacious-fetch","lscache","fast-safe-stringify","fetch-response-enhancer","nanomiddleware","deep-assign"],t):t(e.simpleFetchClient={},e.tenFetch,e.lscache,e.safeStringify,e.fetchResponseEnhancer,e.nanomiddleware,e.deepAssign)}(this,function(e,t,n,o,r,i,s){t=t&&t.hasOwnProperty("default")?t.default:t,n=n&&n.hasOwnProperty("default")?n.default:n,o=o&&o.hasOwnProperty("default")?o.default:o,r=r&&r.hasOwnProperty("default")?r.default:r,i=i&&i.hasOwnProperty("default")?i.default:i,s=s&&s.hasOwnProperty("default")?s.default:s;var a={get:"GET",delete:"DELETE",head:"HEAD",options:"OPTIONS",post:"POST",put:"POST",patch:"PATCH"},d=function(e,n){if(void 0===n&&(n={}),!e||"string"!=typeof e)throw new Error("No base URL provided");this.baseURL=e.endsWith("/")?e.slice(0,e.length-1):e,this.fetch=n.fetch||t,this.middlware=new i,this.delayTime=n.delay||!1,this.cacheTime=n.cacheTime,delete n.fetch,this.config=n};d.prototype.delay=function(e){return void 0===e&&(e=1e3),new Promise(function(t){setTimeout(t,e)})},d.prototype.useMiddleware=function(e,t){void 0===t&&(t={}),this.middlware.use(e,t)},d.prototype.request=function(e,t){void 0===e&&(e="");try{var i=this;function a(){if(u.cache){var e=n.get(d);if(null!==e)return i.middlware.run(e)}return Promise.resolve(i.fetch(d,u)).then(function(e){return Promise.resolve(r(e,u)).then(function(e){return e.url=d,u.cache&&n.set(d,e,u.cacheTime||i.cacheTime||5),i.middlware.run(e)})})}var d=""+i.baseURL+e+(t.params?function(e){void 0===e&&(e={});var t=encodeURIComponent;return"?"+Object.keys(e).map(function(n){return t(n)+"="+t(e[n])}).join("&")}(t.params):""),u=s({headers:{Accept:"application/json","Content-Type":"application/json"}},i.config,t);"object"==typeof u.body&&"application/json"===u.headers["Content-Type"]&&(u.body=o(u.body||{}));var c=function(){if(i.delayTime)return Promise.resolve(i.delay(i.delayTime)).then(function(){})}();return c&&c.then?c.then(a):a()}catch(e){return Promise.reject(e)}},d.prototype.get=function(e,t){return void 0===t&&(t={}),this.request(e,s(t,{method:a.get}))},d.prototype.delete=function(e,t){return void 0===t&&(t={}),this.request(e,s(t,{method:a.delete}))},d.prototype.head=function(e,t){return void 0===t&&(t={}),this.request(e,s(t,{method:a.delete}))},d.prototype.options=function(e,t){return void 0===t&&(t={}),this.request(e,s(t,{method:a.options}))},d.prototype.post=function(e,t){return void 0===t&&(t={}),this.request(e,s(t,{method:a.post}))},d.prototype.put=function(e,t){return void 0===t&&(t={}),this.request(e,s(t,{method:a.put}))},d.prototype.patch=function(e,t){return void 0===t&&(t={}),this.request(e,s(t,{method:a.patch}))},e.methods=a,e.default=d});
//# sourceMappingURL=simple-fetch-client.umd.js.map
